# 希尔排序

## 简单插入排序存在的问题

简单的插入排序可能存在的问题。

如数组 `arr = {2,3,4,5,6,1}`  这时需要插入的数 1（最小），过程是：

```
展示的是要移动 1 这个数，的过程，由于在最后，需要前面的所有数都往后移动一位
{2,3,4,5,6,6}
{2,3,4,5,5,6}
{2,3,4,4,5,6}
{2,3,3,4,5,6}
{2,2,3,4,5,6}
{1,2,3,4,5,6}
```

结论：当需要插入的数是较小的数时，后移的次数明显增多，对效率有影响。

## 简单介绍

希尔排序是希尔（Donald Shell）于 1959 年提出的一种排序算法。

希尔排序也是一种 **插入排序**，它是简单插入排序经过改进后的一个 **更高效的版本**，也称为 **缩小增量排序**。

## 基本思想

希尔排序把记录按 **下标的一定增量分组**，对每组使用 **直接插入排序算法** 排序，随着 **增量逐渐减少**，每组包含的关键词越来越多（要排序的数），当增量减至 1 时，整个文件被分成一组，算法遍终止。

光看上面的描述，对于首次接触的人来说，不知道是啥意思，认真思考下面的说明：

- 原始数组：以下数据元素颜色相同为一组

	![image-20200908221124876](./assets/image-20200908221124876.png)
	
- 初始增量为：`gap = length/2` 这里为 `gap = 10 / 2 = 5`

  那么意味着整个数组被分为 5 组。分别为 `[8,3][9,5][1,4][7,6][2,0]`

  先看明白这里的增量为 5 ，就会分成 5 组。`[8,3]` 这一组来说，对比看下图，它的意思是：从 8 开始，下标增加 5 既对应的数是 3，所以他们分为一组

  ![image-20200908221355406](./assets/image-20200908221355406.png)

- 对上面的这 5 组分别进行 **直接插入排序**

  结果如下图：可以看到，像 3、5、6 这些小元素被调整到了前面。

  ![image-20200908222439882](./assets/image-20200908222439882.png)

  然后缩小增量 `gap = 5 / 2 = 2`，则数组被分为 2 组 `[3,1,0,9,7]` 和 `5,6,8,4,2`

- 对以上 2 组再分别进行直接插入排序

  结果如下图：可以看到，此时整个组数的有序程度更进一步。

  ![image-20200908223049160](./assets/image-20200908223049160.png)

  然后再缩小增量 `gap = 2 / 2 = 1`，则整个数组被当成一组，再进行一次直接插入排序。由于基本上是有序的了，所以少了很多次的调整

  ## 代码实现

  场景：有一群小牛，考试成绩分布是 `{8,9,1,7,2,3,5,4,6,0}`，请从小到大排序。

  对于希尔排序时，对有序序列在 **插入** 时，有以下两种方式：

  - 交换法：容易理解，速度相对较慢
  - 移动法：不太容易理解，速度相对较快

  先实现交换法，然后再优化成移动法。比较容易

  



